generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  studentId         String              @id @default(uuid())
  studentName       String
  studentLastName   String
  studentFullName   String
  studentDni        String
  studentPhone      String
  studentEmail      String
  studentStartDate  DateTime            @db.Date
  createdAt         DateTime            @default(now()) @db.Date
  studentTypeId     String
  studentStatusId   String
  CollectionStudent CollectionStudent[]
  Payment           Payment[]
  StudentStatus     StudentStatus       @relation(fields: [studentStatusId], references: [studentStatusId])
  StudentType       StudentType         @relation(fields: [studentTypeId], references: [studentTypeId])
}

model StudentType {
  studentTypeId   String    @id @default(uuid())
  studentTypeName String
  studentTypeDesc String
  student         Student[]
}

model StudentStatus {
  studentStatusId   String    @id @default(uuid())
  studentStatusName String
  studentStatusDesc String
  student           Student[]
}

model CollectionType {
  collectionTypeId   String       @id @default(uuid())
  collectionTypeName String
  collectionTypeDesc String
  collection         Collection[]
}

model Collection {
  collectionId           String              @id @default(uuid())
  collectionName         String
  collectionDesc         String
  collectionTypeId       String
  collectionBaseAmount   Float
  collectionStudentApply Json[]
  collectionType         CollectionType      @relation(fields: [collectionTypeId], references: [collectionTypeId])
  CollectionStudent      CollectionStudent[]
}

model CollectionStudent {
  collectionStudentId         String     @id @default(uuid())
  collectionId                String
  studentId                   String
  collectionStudentAmountOwed Float
  collectionStudentAmountPaid Float      @default(0)
  collectionStudentDate       DateTime   @db.Date
  collectionStudentUpdateDate DateTime   @db.Date
  collectionDescription       String
  collection                  Collection @relation(fields: [collectionId], references: [collectionId])
  student                     Student    @relation(fields: [studentId], references: [studentId])
  Payment                     Payment[]
}

model Payment {
  paymentId           String            @id @default(uuid())
  studentId           String
  collectionStudentId String
  paymentDate         DateTime          @db.Date
  paymentAmount       Float
  paymentDescription  String
  collectionStudent   CollectionStudent @relation(fields: [collectionStudentId], references: [collectionStudentId])
  student             Student           @relation(fields: [studentId], references: [studentId])
}
